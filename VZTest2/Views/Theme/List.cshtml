@using VZTest2.Instruments;
@using VZTest2.Models.View.Theme;
@using X.PagedList;
@using X.PagedList.Mvc.Core;
@using X.PagedList.Web.Common;
@model IPagedList<ThemeListModel>
@{
    string mode = (ViewData["Mode"] as string) ?? "default";
    ViewData["Title"] = mode.Equals("default") ? "Список публичных тем" : mode.Equals("mine") ? "Список ваших тем" : "Список открытых вам тем";
    var pager = Html.PagedListPager(Model, page => Url.Action("List", "Theme", new { page = page, mine = mode.Equals("mine"), unlock = mode.Equals("unlock") }), DefaultParams.DefaultPagedListRenderOptions);
}

<section>
    <partial name="_ShadeHeaderPartial" />
    <div class="row">
        <div class="col-12">
            @if (Model.PageCount > 1)
            {
                <div class="d-flex justify-content-center mb-2">
                    @pager
                </div>
            }
            @foreach (ThemeListModel theme in Model)
            {
                <hr class="mb-0 mt-0">
                <div>
                    <div class="d-flex">
                        <h3 class="mt-1">
                            <i class="bi bi-@(theme.Public ? "unlock" : "lock")" data-bs-toggle="tooltip" data-bs-placement="top" title="@(theme.Public ? "Публичная тема" : "Приватная тема")"></i>
                            <a asp-controller="Theme" asp-action="Details" asp-route-id="@theme.Id">@theme.Name</a>
                        </h3>
                        <span class="mt-auto">&nbsp; (ID: @theme.Id <a id="copyBtn-@theme.Id" class="bi bi-clipboard" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Копировать идентификатор" onclick="CopyClick(@theme.Id)"></a>)</span>
                    </div>
                    <h6>Количество вопросов: @theme.QuestionCount</h6>
                    @if (theme.Description != null)
                    {
                        <p class="form-text mb-1">@theme.Description</p>
                    }
                </div>
            }
            <hr class="mb-0 mt-0">
            @if (Model.PageCount > 1)
            {
                <div class="d-flex justify-content-center mt-2">
                    @pager
                </div>
            }
        </div>
    </div>
</section>

@section Scripts{
    <script src="~/js/CopyClickScript.min.js" asp-append-version="true"></script>
}